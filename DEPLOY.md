# Инструкция по деплою сайта

## Быстрый старт

### 1. Установка зависимостей

```bash
npm install
```

### 2. Запуск в режиме разработки

```bash
npm run dev
```

Сайт будет доступен по адресу: http://localhost:3000

### 3. Сборка для продакшена

```bash
npm run build
```

### 4. Запуск продакшен версии

```bash
npm start
```

## Админ-панель

### Доступ к админ-панели

Админ-панель доступна по адресу: `/admin`

### Данные для входа

- **Логин:** `Gala2025!`
- **Пароль:** `Krasnaya2025!Admin`

### Функционал админ-панели

- ✅ Добавление, редактирование и удаление туров
- ✅ Управление категориями туров
- ✅ Загрузка изображений (через URL)
- ✅ Фильтрация туров по категориям

## Деплой на Vercel (рекомендуется)

### Простой способ

1. Установите [Vercel CLI](https://vercel.com/cli):
   ```bash
   npm i -g vercel
   ```

2. Войдите в аккаунт:
   ```bash
   vercel login
   ```

3. Деплой:
   ```bash
   vercel
   ```

4. Для продакшена:
   ```bash
   vercel --prod
   ```

### Через веб-интерфейс

1. Зайдите на [vercel.com](https://vercel.com)
2. Подключите ваш GitHub репозиторий
3. Vercel автоматически определит Next.js и настроит деплой
4. После деплоя сайт будет доступен по адресу вида: `your-project.vercel.app`

### Важно для Vercel

- База данных SQLite будет создаваться автоматически при первом запросе
- Файлы базы данных хранятся в файловой системе сервера
- Для постоянного хранения данных рекомендуется использовать внешнюю БД (например, PostgreSQL через Vercel Postgres)

## Деплой на другой хостинг

### Требования

- Node.js 18+ 
- Поддержка Next.js 16
- Возможность запуска серверных приложений (не статический хостинг)

### Шаги

1. Установите зависимости: `npm install`
2. Соберите проект: `npm run build`
3. Запустите: `npm start`

### Переменные окружения

В продакшене можно настроить через переменные окружения:
- `NODE_ENV=production` - режим продакшена

## База данных

### Структура

База данных SQLite создается автоматически в директории `/data/tours.db` при первом запуске.

### Инициализация

При первом запуске автоматически создаются:
- Таблица `tours` (туры)
- Таблица `categories` (категории)
- Три начальные категории:
  - Горнолыжные туры
  - Активный отдых
  - SPA и wellness

### Резервное копирование

Для резервного копирования базы данных:
```bash
cp data/tours.db data/tours.db.backup
```

## Безопасность

- ✅ Пароли хранятся в виде bcrypt хешей
- ✅ Сессии защищены httpOnly cookies
- ✅ Все API endpoints для изменения данных требуют аутентификации
- ✅ Защита от SQL инъекций через prepared statements

## Устранение неполадок

### База данных не создается

Убедитесь, что у приложения есть права на запись в директорию проекта.

### Ошибки при деплое

1. Проверьте версию Node.js (должна быть 18+)
2. Убедитесь, что все зависимости установлены
3. Проверьте логи деплоя на платформе хостинга

### Проблемы с аутентификацией

- Очистите cookies браузера
- Проверьте, что сессия не истекла (действует 7 дней)

## Поддержка

При возникновении проблем проверьте:
1. Логи сервера
2. Консоль браузера (F12)
3. Сеть (Network tab в DevTools)
